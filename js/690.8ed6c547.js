"use strict";(self["webpackChunkweather_app"]=self["webpackChunkweather_app"]||[]).push([[690],{5489:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});var i=function(){var t=this,e=t._self._c;return e("article",{staticClass:"main-page"},t._l(t.getWeatherContent,(function(t,a){return e("city-card",{key:a,attrs:{index:a,"city-card":t}})})),1)},n=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"city-card"},[e("h1",{staticClass:"city-card__city-name"},[t._v(t._s(t.cityCard.cityName))]),e("section",{staticClass:"weather-type-buttons-wrapper"},[e("card-button",{class:["weather-button","weather-button_daily",{"card-button_active":!t.isWeeklyWeatherShow}],attrs:{"button-text":"Daily"},nativeOn:{click:function(e){t.isWeeklyWeatherShow=!1}}}),e("card-button",{class:["weather-button","weather-button_weekly",{"card-button_active":t.isWeeklyWeatherShow}],attrs:{"button-text":"Weekly"},nativeOn:{click:function(e){t.isWeeklyWeatherShow=!0}}})],1),e("section",{directives:[{name:"show",rawName:"v-show",value:t.cityCard.weatherList,expression:"cityCard.weatherList"}],staticClass:"weather-cards-wrapper"},[t._l(t.cityCard.weatherList,(function(a,i){return e("weather-card",{directives:[{name:"show",rawName:"v-show",value:t.isWeeklyWeatherShow,expression:"isWeeklyWeatherShow"}],key:i,attrs:{date:t.getFormattedDate(a[0].date),temperature:String(a[0].temperature),"feels-like":String(a[0].feelsLike),"weather-icon":a[0].icon,humidity:String(a[0].humidity),wind:String(a[0].windSpeed)}})})),e("weather-card",{directives:[{name:"show",rawName:"v-show",value:!t.isWeeklyWeatherShow,expression:"!isWeeklyWeatherShow"}],attrs:{date:t.getFormattedDate(t.dailyWeather.date),temperature:String(t.dailyWeather.temperature),"feels-like":String(t.dailyWeather.feelsLike),"weather-icon":t.dailyWeather.icon,humidity:String(t.dailyWeather.humidity),wind:String(t.dailyWeather.windSpeed)}})],2),e("weather-chart",{attrs:{labels:t.getDateList(t.cityCard.weatherList[0]),"chart-data":t.getWeatherList(t.cityCard.weatherList[0]),type:"line",id:`${t.cityCard.cityName}Chart`}}),e("section",{staticClass:"activity-buttons-wrapper"},[e("card-button",{class:["weather-button","weather-button_favourites"],attrs:{"button-text":"Add to favourites"},nativeOn:{click:function(e){return t.checkConfirmation.apply(null,arguments)}}}),e("card-button",{class:["weather-button","weather-button_delete"],attrs:{"button-text":"Delete"},nativeOn:{click:function(e){return t.deleteCity.apply(null,arguments)}}})],1),e("confirm-modal",{attrs:{opened:t.isModalOpened,"confirm-title":"Add favourite confirmation","confirm-text":"Are you sure you want to add to favourites?"},on:{confirmStatus:t.addFavourite,"update:opened":function(e){t.isModalOpened=e}}}),e("info-modal",{attrs:{opened:t.infoModalOpened,"info-title":"Warning","info-text":"You can`t add new card to favourites, max amount 5 cards"},on:{"update:opened":function(e){t.infoModalOpened=e}}})],1)},o=[],s=a(381),d=a.n(s),c=a(7443),l=a(6151),u=a(7064),h=function(){var t=this,e=t._self._c;return e("section",{class:["confirm-modal",{"confirm-modal_opened":t.opened}],style:`top: ${t.scrollY}px`},[e("div",{staticClass:"confirm-modal_content"},[e("p",{staticClass:"confirm-modal_title"},[t._v(t._s(t.confirmTitle))]),e("p",{staticClass:"confirm-modal_confirm-text"},[t._v(t._s(t.confirmText))]),e("div",{staticClass:"confirm-modal_actions"},[e("button",{staticClass:"confirm-modal_action-button confirm-modal_action-button_disagree",on:{click:function(e){return t.confirmation(!1)}}},[e("span",{staticClass:"confirm-modal_button-text"},[t._v("DISAGREE")])]),e("button",{staticClass:"confirm-modal_action-button confirm-modal_action-button_agree",on:{click:function(e){return t.confirmation(!0)}}},[e("span",{staticClass:"confirm-modal_button-text"},[t._v("AGREE")])])])])])},m=[],f={name:"ConfirmModal",props:{confirmTitle:{type:String,default:"Confirm Title"},confirmText:{type:String,default:"Confirm Text"},opened:{type:Boolean,default:!1},confirmValue:{type:Boolean,default:!1}},data(){return{scrollY:0}},methods:{confirmation(t){this.$emit("confirmStatus",t),this.$emit("update:opened",!1)}},watch:{opened(){this.scrollY=document.documentElement.scrollTop||document.body.scrollTop}}},p=f,y=a(1001),w=(0,y.Z)(p,h,m,!1,null,"36f917e7",null),C=w.exports,v=a(607),_=a(629),g={name:"CityCard",props:{cityCard:{type:Object,default:()=>{},subtype:{cityName:{type:String,default:"City Name"},weatherList:{type:Array,default:()=>[]}}},index:{type:Number,default:0}},computed:{dailyWeather(){return this.cityCard.weatherList[0][0]},...(0,_.Se)("favouritesModule",["getFavouritesContent","getFavouritesContentLength"])},data(){return{isWeeklyWeatherShow:!1,isModalOpened:!1,infoModalOpened:!1}},components:{WeatherCard:c.Z,WeatherChart:l.Z,CardButton:u.Z,ConfirmModal:C,InfoModal:v.Z},methods:{getFormattedDate(t){return d()(t).format("MMM Do YY")},getDateList(t){const e=t.map((t=>d()(t.date).format("LT")));return e},getWeatherList(t){const e=t.map((t=>t.temperature));return e},...(0,_.nv)("favouritesModule",["addNewFavourite"]),...(0,_.nv)("weatherModule",["addToFavourite","deleteWeatherCity"]),isPresentInFavourites(){return-1!==this.getFavouritesContent.findIndex((t=>t.cityName===this.cityCard.cityName))},checkConfirmation(){this.isPresentInFavourites()||(this.checkFavouritesCount()?this.infoModalOpened=!0:this.isModalOpened=!0)},checkFavouritesCount(t=5){return Number(this.getFavouritesContentLength)===t},addFavourite(t){t&&(this.addToFavourite(this.index),this.addNewFavourite(this.cityCard))},deleteCity(){this.deleteWeatherCity(this.index),this.getFavouritesContent.findIndex()}}},b=g,W=(0,y.Z)(b,r,o,!1,null,"37f0a7c6",null),k=W.exports,S={name:"MainPage",components:{CityCard:k},computed:{...(0,_.Se)("weatherModule",["getWeatherContent","getWeatherContentLength"])},methods:{...(0,_.nv)("weatherModule",["getCityByIp"])},mounted(){this.getWeatherContentLength||this.getCityByIp()}},x=S,M=(0,y.Z)(x,i,n,!1,null,"0fadca2b",null),F=M.exports}}]);
//# sourceMappingURL=690.8ed6c547.js.map