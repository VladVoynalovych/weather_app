"use strict";(self["webpackChunkweather_app"]=self["webpackChunkweather_app"]||[]).push([[489],{7545:function(t,e,a){a.r(e),a.d(e,{default:function(){return L}});var n=function(){var t=this,e=t._self._c;return e("article",{staticClass:"main-page"},t._l(t.getWeatherContent,(function(t,a){return e("city-card",{key:a,attrs:{index:a,"city-card":t}})})),1)},i=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"city-card"},[e("h1",{staticClass:"city-card__city-name"},[t._v(t._s(t.cityCard.cityName))]),e("section",{staticClass:"weather-type-buttons-wrapper"},[e("card-button",{class:["weather-button","weather-button_daily",{"card-button_active":!t.isWeeklyWeatherShow}],attrs:{"button-text":"Daily"},nativeOn:{click:function(e){t.isWeeklyWeatherShow=!1}}}),e("card-button",{class:["weather-button","weather-button_weekly",{"card-button_active":t.isWeeklyWeatherShow}],attrs:{"button-text":"Weekly"},nativeOn:{click:function(e){t.isWeeklyWeatherShow=!0}}})],1),t.cityCard.weatherList?e("section",{staticClass:"weather-cards-wrapper"},t._l(t.weatherList,(function(a,n){return e("weather-card",{key:n,attrs:{date:t.getFormattedDate(a[0].date),temperature:String(a[0].temperature),"feels-like":String(a[0].feelsLike),"weather-icon":a[0].icon,humidity:String(a[0].humidity),wind:String(a[0].windSpeed)}})})),1):t._e(),e("weather-chart",{attrs:{labels:t.getDateList(t.cityCard.weatherList[0]),"chart-data":t.getWeatherList(t.cityCard.weatherList[0]),type:"line",id:`${t.cityCard.cityName}Chart`}}),e("section",{staticClass:"activity-buttons-wrapper"},[e("card-button",{class:["weather-button","weather-button_favourites"],attrs:{"button-text":"Add to favourites"},nativeOn:{click:function(e){return t.checkConfirmation.apply(null,arguments)}}}),e("card-button",{class:["weather-button","weather-button_delete"],attrs:{"button-text":"Delete"},nativeOn:{click:function(e){return t.deleteCity.apply(null,arguments)}}})],1),e("confirm-modal",{attrs:{opened:t.isModalOpened,"confirm-title":"Add favourite confirmation","confirm-text":"Are you sure you want to add to favourites?"},on:{confirmStatus:t.addFavourite,"update:opened":function(e){t.isModalOpened=e}}}),e("info-modal",{attrs:{opened:t.infoModalOpened,"info-title":"Warning","info-text":"You can`t add new card to favourites, max amount 5 cards"},on:{"update:opened":function(e){t.infoModalOpened=e}}})],1)},o=[],s=a(6797),c=a.n(s),d=a(195),u=a(8621),l=a(7064),h=function(){var t=this,e=t._self._c;return e("section",{class:["confirm-modal",{"confirm-modal_opened":t.opened}],style:`top: ${t.scrollY}px`},[e("div",{staticClass:"confirm-modal_content"},[e("p",{staticClass:"confirm-modal_title"},[t._v(t._s(t.confirmTitle))]),e("p",{staticClass:"confirm-modal_confirm-text"},[t._v(t._s(t.confirmText))]),e("div",{staticClass:"confirm-modal_actions"},[e("button",{staticClass:"confirm-modal_action-button confirm-modal_action-button_disagree",on:{click:function(e){return t.confirmation(!1)}}},[e("span",{staticClass:"confirm-modal_button-text"},[t._v("DISAGREE")])]),e("button",{staticClass:"confirm-modal_action-button confirm-modal_action-button_agree",on:{click:function(e){return t.confirmation(!0)}}},[e("span",{staticClass:"confirm-modal_button-text"},[t._v("AGREE")])])])])])},f=[],m={name:"ConfirmModal",props:{confirmTitle:{type:String,default:"Confirm Title"},confirmText:{type:String,default:"Confirm Text"},opened:{type:Boolean,default:!1},confirmValue:{type:Boolean,default:!1}},data(){return{scrollY:0}},methods:{confirmation(t){this.$emit("confirmStatus",t),this.$emit("update:opened",!1)}},watch:{opened(){this.scrollY=document.documentElement.scrollTop||document.body.scrollTop}}},p=m,y=a(1001),C=(0,y.Z)(p,h,f,!1,null,"36f917e7",null),w=C.exports,v=a(607),_=a(3822),b={name:"CityCard",props:{cityCard:{type:Object,default:()=>{},subtype:{cityName:{type:String,default:"City Name"},weatherList:{type:Array,default:()=>[]}}},index:{type:Number,default:0}},computed:{dailyWeather(){return this.cityCard.weatherList[0][0]},...(0,_.Se)("favouritesModule",["getFavouritesContent","getFavouritesContentLength"]),weatherList(){if(this.isWeeklyWeatherShow)return this.cityCard.weatherList;{let t=JSON.stringify(this.cityCard.weatherList);return t=JSON.parse(t),t.length=1,t}}},data(){return{isWeeklyWeatherShow:!1,isModalOpened:!1,infoModalOpened:!1}},components:{WeatherCard:d.Z,WeatherChart:u.Z,CardButton:l.Z,ConfirmModal:w,InfoModal:v.Z},methods:{getFormattedDate(t){return c()(t).format("MMM Do YY")},getDateList(t){const e=t.map((t=>c()(t.date).format("LT")));return e},getWeatherList(t){const e=t.map((t=>t.temperature));return e},...(0,_.nv)("favouritesModule",["addNewFavourite"]),...(0,_.nv)("weatherModule",["addToFavourite","deleteWeatherCity"]),isPresentInFavourites(){return-1!==this.getFavouritesContent.findIndex((t=>t.cityName===this.cityCard.cityName))},checkConfirmation(){this.isPresentInFavourites()||(this.checkFavouritesCount()?this.infoModalOpened=!0:this.isModalOpened=!0)},checkFavouritesCount(t=5){return Number(this.getFavouritesContentLength)===t},addFavourite(t){t&&(this.addToFavourite(this.index),this.addNewFavourite(this.cityCard))},deleteCity(){this.deleteWeatherCity(this.index),this.getFavouritesContent.findIndex()}}},g=b,k=(0,y.Z)(g,r,o,!1,null,"06a7633a",null),W=k.exports,x={name:"MainPage",components:{CityCard:W},computed:{...(0,_.Se)("weatherModule",["getWeatherContent","getWeatherContentLength"])},methods:{...(0,_.nv)("weatherModule",["getCityByIp"])},mounted(){this.getWeatherContentLength||this.getCityByIp()}},S=x,M=(0,y.Z)(S,n,i,!1,null,"0fadca2b",null),L=M.exports}}]);
//# sourceMappingURL=489.dd0f2500.js.map